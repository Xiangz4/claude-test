# =====================================================
# FX-V1 Microservices Environment Configuration
# =====================================================
# Copy this file to .env and update with your values
# DO NOT commit .env to version control

# =====================================================
# Environment
# =====================================================
NODE_ENV=development
LOG_LEVEL=debug

# =====================================================
# PostgreSQL Configuration
# =====================================================
POSTGRES_USER=fx_user
POSTGRES_PASSWORD=fx_password
POSTGRES_PORT=5432

# Database names (auto-created on first start)
RATE_DB_NAME=rate_db
TRANSACTION_DB_NAME=transaction_db
CHANNEL_DB_NAME=channel_db

# =====================================================
# Redis Configuration
# =====================================================
REDIS_PORT=6379
REDIS_PASSWORD=
RATE_CACHE_TTL=300          # 5 minutes in seconds
QUOTE_LOCK_TTL=30           # 30 seconds

# =====================================================
# RabbitMQ Configuration
# =====================================================
RABBITMQ_USER=fx_admin
RABBITMQ_PASSWORD=fx_password
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
RABBITMQ_VHOST=/fx-v1

# =====================================================
# Microservice Ports
# =====================================================
RATE_SERVICE_PORT=3001
TRANSACTION_SERVICE_PORT=3002
CHANNEL_SERVICE_PORT=3003

# =====================================================
# Rate Service Configuration
# =====================================================
RATE_FETCH_INTERVAL=60000   # 60 seconds (1 minute)
RATE_CACHE_ENABLED=true
RATE_CALCULATION_PRECISION=10

# =====================================================
# Transaction Service Configuration
# =====================================================
ORDER_TIMEOUT=300000        # 5 minutes
SAGA_RETRY_ATTEMPTS=3
SAGA_RETRY_DELAY=5000       # 5 seconds

# =====================================================
# Channel Service Configuration
# =====================================================
CHANNEL_TIMEOUT=30000       # 30 seconds
CHANNEL_RETRY_ATTEMPTS=3
CHANNEL_RETRY_DELAY=3000    # 3 seconds
CHANNEL_HEALTH_CHECK_INTERVAL=60000  # 1 minute

# =====================================================
# PHP Channel Configuration
# =====================================================
PHP_CHANNEL_API_URL=https://api.php-channel.example.com
PHP_CHANNEL_API_KEY=your_php_channel_api_key_here
PHP_CHANNEL_API_SECRET=your_php_channel_api_secret_here
PHP_CHANNEL_MEMBER_ID=your_member_id_here
PHP_CHANNEL_ENABLED=true

# =====================================================
# BOCHK Channel Configuration
# =====================================================
BOCHK_CHANNEL_API_URL=https://mds1a.trkdhs.com/bochkfxibs/mktinfo
BOCHK_CHANNEL_ENABLED=true
BOCHK_CHANNEL_RATE_SOURCE=realtime  # or 'published'

# =====================================================
# Leptage Channel Configuration
# =====================================================
LEPTAGE_CHANNEL_API_URL=https://api.leptage.example.com
LEPTAGE_CHANNEL_API_KEY=your_leptage_api_key_here
LEPTAGE_CHANNEL_API_SECRET=your_leptage_api_secret_here
LEPTAGE_CHANNEL_ENABLED=false
LEPTAGE_CHANNEL_WALLET_ADDRESS=your_wallet_address_here

# =====================================================
# Encryption Configuration
# =====================================================
ENCRYPTION_KEY=your_32_character_encryption_key_here_change_in_production
ENCRYPTION_ALGORITHM=aes-256-cbc

# =====================================================
# JWT Configuration
# =====================================================
JWT_SECRET=your_jwt_secret_key_here_change_in_production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# =====================================================
# API Gateway Configuration
# =====================================================
API_GATEWAY_PORT=3000
API_GATEWAY_RATE_LIMIT=100  # requests per minute
API_GATEWAY_CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# =====================================================
# Monitoring and Logging
# =====================================================
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=false
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# =====================================================
# External Service URLs (for inter-service communication)
# =====================================================
RATE_SERVICE_URL=http://rate-service:3001
TRANSACTION_SERVICE_URL=http://transaction-service:3002
CHANNEL_SERVICE_URL=http://channel-service:3003
ACCOUNT_SERVICE_URL=http://account-service:3004

# =====================================================
# Feature Flags
# =====================================================
ENABLE_CHANNEL_FALLBACK=true
ENABLE_RATE_ARBITRAGE_CHECK=true
ENABLE_AUTOMATIC_RETRY=true
ENABLE_WEBHOOK_NOTIFICATIONS=false

# =====================================================
# Business Rules Configuration
# =====================================================
MIN_EXCHANGE_AMOUNT=100
MAX_EXCHANGE_AMOUNT=1000000
DEFAULT_CURRENCY_PAIRS=USD/HKD,USD/CNY,EUR/HKD,GBP/HKD

# =====================================================
# Testing Configuration
# =====================================================
TEST_MODE=false
MOCK_CHANNEL_RESPONSES=false
MOCK_RATE_DATA=false
